(ns datomic.schema)

(def customer-portifolio-schema
  [[{:db/ident :customer-portifolio/customer-id
     :db/valueType :db.type/uuid
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :customer-portifolio/stock-code
     :db/valueType :db.type/keyword
     :db.cardinality :db.cardinality/one}]
   [{:db/ident :customer-portifolio/amount
     :db/valueType :db.type/bigint
     :db/cardinality :db.cardinality/one}]])

(def order-schema
  [[{:db/ident :order/customer-id
     :db/valueType :db.type/uuid
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order/operation
     :db/valueType :db.type/keyword
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order/timestamp
     :db/valueType :db.type/inst
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order/stock-code
     :db/valueType :db.type/keyword
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order/stock-ref
     :db/valueType :db.type/ref
     :db/cardinality :db.cardinality/on}]
   [{:db/ident :order/total
     :db/valueType :db.type/bigint
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order/value 
     :db/valueType :db.type/float
     :db/cardinality :db.cardinality/one}]])

(def stock-schema
  [[{:db/ident :stock/code 
     :db/valueType :db.type/keyword
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :stock/added
     :db/valueType :db.type/inst
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :stock/company
     :db/valueType :db.type/string
     :db/cardinality :db.cardinality/one}]])

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(def customer-portifolio-schema-partitioned
  [[{:db/ident :customer-portifolio-partitioned/customer-id
     :db/valueType :db.type/uuid
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :customer-portifolio-partitioned/stock-code
     :db/valueType :db.type/keyword
     :db.cardinality :db.cardinality-partitioned/one}]
   [{:db/ident :customer-portifolio/amount
     :db/valueType :db.type/bigint
     :db/cardinality :db.cardinality/one}]])

(def order-schema-partitioned
  [[{:db/ident :order-partitioned/customer-id
     :db/valueType :db.type/uuid
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order-partitioned/operation
     :db/valueType :db.type/keyword
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order-partitioned/timestamp
     :db/valueType :db.type/inst
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order-partitioned/stock-code
     :db/valueType :db.type/keyword
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order-partitioned/stock-ref
     :db/valueType :db.type/ref
     :db/cardinality :db.cardinality/on}]
   [{:db/ident :order-partitioned/total
     :db/valueType :db.type/bigint
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :order-partitioned/value 
     :db/valueType :db.type/float
     :db/cardinality :db.cardinality/one}]])

(def stock-schema-partitioned
  [[{:db/ident :stock-partitioned/code 
     :db/valueType :db.type/keyword
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :stock-partitioned/added
     :db/valueType :db.type/inst
     :db/cardinality :db.cardinality/one}]
   [{:db/ident :stock-partitioned/company
     :db/valueType :db.type/string
     :db/cardinality :db.cardinality/one}]])


